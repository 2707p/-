<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>학교 포털</title>
<style>
  body { font-family: Arial; margin:0; padding:0; background:#f0f2f5; }
  h1,h2 { color:#2c3e50; }
  .container { padding:20px; }
  input[type=text], input[type=password] { padding:5px; margin:5px 0; width:200px; }
  button { padding:5px 10px; margin:5px; cursor:pointer; border:none; border-radius:5px; background:#3498db; color:white; }
  button:hover { background:#2980b9; }
  #portal-section { display:none; }
  #sidebar { position:fixed; left:0; top:0; width:0; height:100%; background:#2c3e50; overflow-x:hidden; transition:0.3s; padding-top:60px; }
  #sidebar a { padding:10px 15px; text-decoration:none; font-size:18px; color:white; display:block; transition:0.3s; }
  #sidebar a:hover { background:#34495e; }
  #sidebar-close { position:absolute; top:10px; right:20px; font-size:30px; cursor:pointer; color:white; }
  #main { margin-left:0; transition: margin-left 0.3s; padding:20px; }
</style>
</head>
<body>

<div class="container">
  <!-- 로그인 -->
  <section id="login-section">
    <h1>학교 포털 로그인</h1>
    <input id="login-id" placeholder="아이디"><br>
    <input id="login-pw" type="password" placeholder="비밀번호"><br>
    <button onclick="login()">로그인</button>
    <button onclick="showSignup()">회원가입</button>
  </section>

  <!-- 회원가입 -->
  <section id="signup-section" style="display:none;">
    <h1>회원가입</h1>
    <input id="signup-id" placeholder="아이디"><br>
    <input id="signup-pw" type="password" placeholder="비밀번호"><br>
    <button onclick="signup()">가입</button>
    <button onclick="hideSignup()">취소</button>
  </section>

  <!-- 포털 메인 -->
  <section id="portal-section">
    <span style="font-size:20px;cursor:pointer" onclick="openSidebar()">☰ 더보기</span>
    <button onclick="logout()">로그아웃</button>
    <div id="main">
      <h2>환영합니다!</h2>
      <p>메뉴를 클릭해서 각 페이지로 이동하세요.</p>
    </div>
  </section>
</div>

<!-- 사이드바 -->
<div id="sidebar">
  <span id="sidebar-close" onclick="closeSidebar()">&times;</span>
  <a href="#" onclick="showPage('공지')">공지</a>
  <a href="#" onclick="showPage('학사일정')">학사일정</a>
  <a href="#" onclick="showPage('시간표')">시간표</a>
  <a href="#" onclick="showPage('급식표')">급식표</a>
  <a href="#" onclick="showPage('대나무숲')">대나무숲</a>
</div>

<script>
  // ===== 유저 데이터 =====
  let users = JSON.parse(localStorage.getItem('users') || '[]');

  // 자동 로그인
  window.onload = function(){
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if(currentUser){
      showPortal();
    }
  }

  function login(){
    const id = document.getElementById('login-id').value.trim();
    const pw = document.getElementById('login-pw').value.trim();
    users = JSON.parse(localStorage.getItem('users')||'[]');
    const user = users.find(u => u.id===id && u.password===pw);
    if(user){
      localStorage.setItem('currentUser', JSON.stringify(user));
      showPortal();
    } else {
      alert('아이디 또는 비밀번호가 틀렸습니다.');
    }
  }

  function logout(){
    localStorage.removeItem('currentUser');
    location.reload();
  }

  function showSignup(){
    document.getElementById('login-section').style.display='none';
    document.getElementById('signup-section').style.display='block';
  }
  function hideSignup(){
    document.getElementById('signup-section').style.display='none';
    document.getElementById('login-section').style.display='block';
  }

  function signup(){
    const id=document.getElementById('signup-id').value.trim();
    const pw=document.getElementById('signup-pw').value.trim();
    if(!id || !pw){ alert('모든 항목을 입력해주세요'); return; }
    if(users.some(u=>u.id===id)){ alert('이미 존재하는 아이디입니다.'); return; }
    users.push({id:id,password:pw});
    localStorage.setItem('users', JSON.stringify(users));
    alert('회원가입 완료! 로그인 해주세요.');
    hideSignup();
  }

  // ===== 포털 메인 =====
  function showPortal(){
    document.getElementById('login-section').style.display='none';
    document.getElementById('signup-section').style.display='none';
    document.getElementById('portal-section').style.display='block';
  }

  function openSidebar(){
    document.getElementById('sidebar').style.width='250px';
    document.getElementById('main').style.marginLeft='250px';
  }
  function closeSidebar(){
    document.getElementById('sidebar').style.width='0';
    document.getElementById('main').style.marginLeft='0';
  }

  function showPage(name){
    const main = document.getElementById('main');
    main.innerHTML=`<h2>${name} 페이지</h2><p>이곳은 ${name} 페이지입니다. (임시)</p>`;
    closeSidebar();
  }
</script>
</body>
</html>
